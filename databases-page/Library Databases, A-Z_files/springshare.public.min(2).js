/*! springshare 1.11.0 */

var springSpace=springSpace||{};springSpace.public={},springSpace.public._construct=function(){function e(e){this.constant=springSpace.Util.setProp(e.constant,null),this.script_name=springSpace.Util.setProp(e.script_name,0),this.guide_id=springSpace.Util.setProp(e.guide_id,0),this.page_id=springSpace.Util.setProp(e.page_id,0),this.guide_friendly_name=springSpace.Util.setProp(e.guide_friendly_name,""),this.page_friendly_name=springSpace.Util.setProp(e.page_friendly_name,""),this.system_name=springSpace.Util.setProp(e.system_name,""),this.customer=springSpace.Util.setProp(e.customer,{name:""}),this.login_status=null}e.prototype.loadHomepageList=function(e){springSpace.Util.setObjProp("nav","",e),key=springSpace.Util.setProp(e.key,0),type_id=springSpace.Util.setProp(e.type_id,0),group_id=springSpace.Util.setProp(e.group_id,0),owner_id=springSpace.Util.setProp(e.owner_id,0),type_label=springSpace.Util.setProp(e.type_label,"Guides"),num_cols=springSpace.Util.setProp(e.num_cols,""),display_sort=springSpace.Util.setProp(e.display_sort,!1),jQuery(".s-lg-index-nav-btn").removeClass("active"),jQuery("#"+e.button_id).addClass("active"),jQuery("#s-lg-guide-list-controls").hide(),jQuery("#"+e.elt_id).html('<div class="bold s-lib-color-lt-grey pad-top-med">Loading...</div>'),springSpace.homepage.current_list!==e.action&&(springSpace.homepage.current_list=e.action,springSpace.homepage.current_btn_id=e.button_id,springSpace.homepage.current_button_code=springSpace.homepage.mapButtonEltIdToQSId(e.button_id),springSpace.homepage.current_num_cols=num_cols,springSpace.homepage.current_type_label=type_label||jQuery("#s-lg-index-label").html()),xhr=jQuery.ajax({url:"/index_process.php",data:{action:e.action,order:e.order,type_id:type_id,owner_id:owner_id,group_id:group_id,num_cols:springSpace.homepage.current_num_cols,search:jQuery("#s-lg-guide-search").val()},type:"GET",dataType:"json",success:function(t,i,s){if(200==t.errCode)if(1==t.data.reload_ui)top.window.document.location.reload();else{if(jQuery("#"+e.elt_id).html(t.data.content),jQuery("#s-lg-index-list-header").html(t.data.list_header),jQuery("#form-group-s-lg-guide-order").toggle(display_sort),jQuery("#s-lg-guide-list-controls").show(),top.window.helptips=new springSpace.sui.helptip({placement:"right"}),e.action==springSpace.publicObj.constant.PROCESSING.ACTION_LOAD_GUIDE_LIST)guide_text=springSpace.publicObj.homeNavButtons[e.action]+" "+jQuery("#s-lg-guide-order option:selected").text();else{var r=springSpace.publicObj.constant.CONTENT.HOME_GUIDES_TITLE||"Guides";guide_text=r+" "+springSpace.publicObj.homeNavButtons[e.action]}document.title=guide_text+" - "+springSpace.publicObj.system_name+" at "+springSpace.publicObj.customer.name,springSpace.homepage.default_list_order=springSpace.homepage.mapGuideSortIdToQSId(e.order),jQuery("#s-lg-guide-order > option[value='"+e.order+"']").prop("selected",!0),springSpace.homepage.processPushState({nav:e.nav})}else jQuery("#"+e.elt_id).html('<div class="alert alert-danger"><div>Sorry, there was a problem loading the list. '+errorThrown+"</div><div>Please try again. If the problem persists contact support@springshare.com.</div></div>")},error:function(t,i,s){jQuery("#"+e.elt_id).html('<div class="alert alert-danger"><div>Sorry, there was a problem loading the list. '+s+"</div><div>Please try again. If the problem persists contact support@springshare.com.</div></div>")}})},e.prototype.getAzFilterValues=function(e){return{first:springSpace.Util.setProp(e.first,springSpace.azList.letter_selected),subject_id:springSpace.Util.setProp(e.subject_id,jQuery("#s-lg-sel-subjects").val()),type_id:springSpace.Util.setProp(e.type_id,jQuery("#s-lg-sel-az-types").val()),vendor_id:springSpace.Util.setProp(e.vendor_id,jQuery("#s-lg-sel-az-vendors").val()),search:springSpace.Util.setProp(e.search,jQuery("#s-lg-az-search").val()),site_id:e.site_id}},e.prototype.filterAzByFirst=function(e,t,i){var s={languageKeyLabel:i},r=this.getAzFilterValues({first:e,site_id:t});for(var a in r)s[a]=r[a];springSpace.azList.letter_selected=e,jQuery(".s-lg-az-first").removeClass("bold"),jQuery("#s-lg-az-first-"+e).addClass("bold"),this.loadAzList(s)},e.prototype.filterAzBySubject=function(e,t){this.loadAzList(this.getAzFilterValues({subject_id:e,site_id:t}))},e.prototype.filterAzByType=function(e,t){this.loadAzList(this.getAzFilterValues({type_id:e,site_id:t}))},e.prototype.filterAzByVendor=function(e,t){this.loadAzList(this.getAzFilterValues({vendor_id:e,site_id:t}))},e.prototype.filterAzBySearch=function(e){if(this.loadAzList(this.getAzFilterValues({search:jQuery("#s-lg-az-search").val(),site_id:e})),void 0!==springSpace.springTrack)try{if(""==jQuery("#s-lg-az-search").val()||"*:*"==jQuery("#s-lg-az-search").val())return;springSpace.springTrack.trackSearch({_st_type_id:"27",_st_group_id:0,_st_guide_id:0,_st_search_terms:jQuery("#s-lg-az-search").val()})}catch(e){searchcontroller.debug(e)}},e.prototype.clearAzSelection=function(e){jQuery("#"+e).val("").trigger("chosen:updated")},e.prototype.toggleAzClearButton=function(e){var t=""!==e.first||""!==e.subject_id||""!==e.type_id||""!==e.search||""!==e.vendor_id;jQuery("#s-lg-az-reset").toggle(t)},e.prototype.toggleAzSubjectBoxes=function(e){var t=""!=e.subject_id;jQuery("#s-lg-az-experts-div").html(""),jQuery("#s-lg-az-guides-div").html("");var i=this;t&&(xhr=jQuery.ajax({url:"/az_process.php",type:"GET",dataType:"json",data:{action:e.action,subject_id:e.subject_id,site_id:e.site_id,is_widget:springSpace.azList.is_widget},success:function(e,t){200==e.errCode&&(jQuery("#s-lg-az-experts-div").html(e.data.experts),jQuery("#s-lg-az-guides-div").html(e.data.guides)),1==springSpace.azList.is_widget&&i.transformAzLinks()},error:function(e,t,i){springSpace.UI.error(i)}})),jQuery("#s-lg-az-trials-div").toggle(!t),jQuery("#s-lg-az-popular-div").toggle(!t),jQuery("#s-lg-az-experts-div").toggle(t),jQuery("#s-lg-az-guides-div").toggle(t)},e.prototype.displayAzShareAlert=function(e){btn_text=e.btn_text,xhr=jQuery.ajax({url:"/az_process.php",type:"POST",dataType:"json",data:{action:e.action,id:e.id,name:e.name,site_id:e.site_id},success:function(t,i){200==t.errCode?(springSpace.UI.alert({title:e.name,width:"360",height:"auto",content:t.data.html,buttons:{btn_text:function(){jQuery("#s-lib-alert").dialog("close"),jQuery("#s-lib-alert-content").html("")}}}),jQuery("#s-lib-alert-btn-first").html(e.btn_text)):springSpace.UI.error(t.errText)},error:function(e,t,i){springSpace.UI.error(i)}})},e.prototype.loadAzList=function(e){springSpace.UI.notify({mode:"load",duration:3e4}),e=void 0===e?{first:"",subject_id:"",search:""}:e,jQuery.each(["subject_id","type_id","vendor_id","first","search"],function(t,i){e[i]||(e[i]="")}),""==e.subject_id&&this.clearAzSelection("s-lg-sel-subjects"),""==e.type_id&&this.clearAzSelection("s-lg-sel-az-types"),""==e.vendor_id&&this.clearAzSelection("s-lg-sel-az-vendors"),""==e.search&&jQuery("#s-lg-az-search").val(""),this.toggleAzClearButton(e),this.toggleAzSubjectBoxes({subject_id:e.subject_id?e.subject_id:"",action:521,site_id:e.site_id});var t=this,i=function(e,t,i){void 0!==t&&void 0!==i&&0!=t&&e.push(springSpace.Util.escapeHtml(i.replace(/ \(\d+\)/i,"")))},s=jQuery("#s-lg-az-search"),r=void 0===s.val()||""==s.val()?"/process/az/dblist":"/process/az/dbsearch";xhr=jQuery.ajax({url:r,type:"GET",dataType:"json",data:{action:520,first:e.first,subject_id:e.subject_id,type_id:e.type_id,vendor_id:e.vendor_id,content_id:e.content_id?e.content_id:0,search:e.search,site_id:e.site_id,is_widget:springSpace.azList.is_widget},success:function(r,a){if(springSpace.UI.notifyStop(),history.pushState&&0==springSpace.azList.is_widget&&"back"!==e.action&&"init"!==e.action&&history.pushState({},null,location.pathname+encodeURI(t.buildAzQs(e))),springSpace.azList.historyEdited=!0,springSpace.azList.selectLetter(e.first),200==r.errCode){jQuery("#s-lg-az-content").html(r.data.html),r.data.az_index_html&&(jQuery("#s-lg-az-index").html(r.data.az_index_html),springSpace.azList.selectLetter(e.first)),r.data.subjects_html&&jQuery("#col-subjects").html(r.data.subjects_html),r.data.az_types_html&&jQuery("#col-types").html(r.data.az_types_html),r.data.az_vendors_html&&jQuery("#col-vendors").html(r.data.az_vendors_html);var l=t.getAZFilterData(r.data.selected_subject,"s-lg-sel-subjects"),o=t.getAZFilterData(r.data.selected_vendor,"s-lg-sel-az-vendors"),n=t.getAZFilterData(r.data.selected_type,"s-lg-sel-az-types"),p=[],c="pound"===e.first?"#":"all"===e.first?e.languageKeyLabel:e.first.toUpperCase();i(p,l.id,l.name),i(p,n.id,n.name),i(p,o.id,o.name),i(p,c,c),i(p,s.val(),s.val());var d=(p.length>0?": ":"")+p.join(": "),u=p.join("; ");jQuery("#s-lg-az-result-count").html(r.data.list_count+(u.length>0?" "+r.data.list_count_for+" "+u:"")),jQuery("#s-lib-public-header-title").html(title_base+d),jQuery("title").html(title_base+d)}else jQuery("#s-lg-az-content").html('Something unexpected happened - please try again and if you continue to receive the error please let us know.<div class="s-ghost" style="margin-top:20px;">'+r.errText+"</div>");jQuery(".az-bs-tooltip").tooltip(),1==springSpace.azList.is_widget&&t.transformAzLinks(),jQuery("#s-lg-az-trials-loading").toggle(!1),jQuery("#s-lg-az-trials").toggle(!0),jQuery("#s-lg-az-popular-loading").toggle(!1),jQuery("#s-lg-az-popular").toggle(!0)},error:function(e,t,i){springSpace.UI.error(i)}})},e.prototype.getAZFilterData=function(e,t){return e?{id:e.id,name:e.name}:{id:jQuery("#"+t).val(),name:jQuery("#"+t+" option:selected").text()}},e.prototype.buildAzQs=function(e){var t={a:springSpace.Util.setProp(e.first,""),s:springSpace.Util.setProp(e.subject_id,""),v:springSpace.Util.setProp(e.vendor_id,""),t:springSpace.Util.setProp(e.type_id,""),q:springSpace.Util.setProp(e.search,"")},i=[];return jQuery.each(t,function(e,t){""!==t&&"0"!==t&&i.push(e+"="+t)}),0==i.length?"":"?"+i.join("&")},e.prototype.transformAzLinks=function(e){jQuery(".s-lg-az-result-title a, .s-lib-featured-profile-image a, #s-lg-az-guides-div a").each(function(){jQuery(this).attr("target","_blank")}),jQuery(".s-lg-az-result-title a, .s-lib-featured-profile-image a").each(function(){var e=jQuery(this).attr("href");0==/^https?:\/\/|^\/\//i.test(e)&&jQuery(this).attr("href","http://"+springSpace.azList.site_domain+e)})},this.Public=e},springSpace.public._construct(),jQuery(document).ready(function(){jQuery(window).scroll(function(){jQuery(this).scrollTop()>220?jQuery("#s-lib-scroll-top").fadeIn(750):jQuery("#s-lib-scroll-top").fadeOut(750)}),jQuery("#s-lib-scroll-top").click(function(e){return e.preventDefault(),jQuery("html, body").animate({scrollTop:0},750),!1}),jQuery(".az-bs-tooltip").tooltip()});